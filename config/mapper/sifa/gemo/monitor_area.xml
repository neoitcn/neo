<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aofa.sifa.mapper.gemo.MonitorAreaDao">

	<sql id="monitorAreaColumns">
		ma.id,ma.deleted,ma.active_area_info, ma.area_type,ma.polygon_point,ma.name
	</sql>
	<sql id="monitorAreaColumns2">
		id,deleted, active_area_info, area_type,polygon_point,name
	</sql>

	<resultMap id="monitorAreaMap" type="MonitorArea">
		<id column="id" jdbcType="VARCHAR" property="id" />
		<result column="deleted" jdbcType="INTEGER" property="deleted" />
		<result column="active_area_info" jdbcType="VARCHAR" property="activeAreaInfo" />
		<result column="area_type" jdbcType="INTEGER" property="areaType" />
		<result column="polygon_point" jdbcType="LONGVARCHAR" property="polygonPoint" />
		<result column="name" jdbcType="VARCHAR" property="name" />
	</resultMap>
	<select id="getMonitorAreas" resultMap="monitorAreaMap">
		select <include refid="monitorAreaColumns"></include>
		from mo_monitor_area ma
		where ma.deleted = 1
		<if test="name!=null and name!=''">
			and ma.name like concat('%',#{name},'%')
		</if>
	</select>
	<select id="getCount" resultType="java.lang.Long">
		select count(id)
		from mo_monitor_area ma
		where ma.deleted = 1
	</select>
	<select id="getMonitorAreaById" resultMap="monitorAreaMap">
		select <include refid="monitorAreaColumns"></include>
		from mo_monitor_area ma
		where ma.deleted = 1
		and ma.id = #{id}
	</select>
	<!-- 查看该条记录处于数据库中的第几行。如需要排序，请自行修改 -->
	<select id="getRowNum" resultType="java.lang.Long">
		select @rownum := @rownum + 1 as rownum from
		(select @rownum := 0,id <!--, <include refid="monitorAreaColumns"></include> --> from mo_monitor_area ma) t
		where t.id = #{id}
	</select>
	<insert id="addMonitorArea">
		insert into mo_monitor_area (
			<include refid="monitorAreaColumns2"></include>
		)
		values (#{id,jdbcType=VARCHAR}, #{deleted,jdbcType=INTEGER},
		#{activeAreaInfo,jdbcType=VARCHAR}, #{areaType,jdbcType=INTEGER},
		#{polygonPoint,jdbcType=LONGVARCHAR},#{name}
		)
	</insert>
	<update id="updateMonitorArea" >
		update mo_monitor_area
		set
		deleted = #{deleted,jdbcType=INTEGER},
		active_area_info = #{activeAreaInfo,jdbcType=VARCHAR},
		area_type = #{areaType,jdbcType=INTEGER},
		polygon_point=#{polygonPoint},
		name=#{name}
		where id = #{id,jdbcType=VARCHAR}
	</update>
	<update id="deleteMonitorArea">
		update mo_monitor_area set deleted = '0' where id=#{id}
	</update>
</mapper>